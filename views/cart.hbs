<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Cart</title>
        <link rel="stylesheet" href="/store.css" />
        <link rel="stylesheet" href="/cart.css" />
        <!-- Link button -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        
    </head>
    <body>
        <div class="app-container">
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="app-icon">
                        <span class="w3-bar-item w3-right" style="font-family: Freestyle Script; font-size: 25px; color: rgb(0, 255, 128);">Home Fitness</span>
                    </div>
                </div>
                <ul class="sidebar-list">
                    <li class="sidebar-list-item">
                        <a href="/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                                <polyline points="9 22 9 12 15 12 15 22" />
                            </svg>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="sidebar-list-item">
                        <a href="/store" style="text-decoration: none;">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="18"
                                height="18"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="feather feather-shopping-bag"
                            >
                                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z" />
                                <line x1="3" y1="6" x2="21" y2="6" />
                                <path d="M16 10a4 4 0 0 1-8 0" />
                            </svg>
                            <span>Products</span>
                            <span style="margin-left: 70px; color: orange;">{{quantity}}</span>
                        </a>
                    </li>

                    <li class="sidebar-list-item active">
                        <a href="/cart" style="text-decoration: none;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-inbox">
                                <polyline points="22 12 16 12 14 15 10 15 8 12 2 12" />
                                <path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z" />
                            </svg>
                            <span>Cart</span>
                            <span style="margin-left: 100px; color: orange;">{{cart_quantity}}</span>
                        </a>
                    </li>
                </ul>
                <div class="account-info">
                    <div class="account-info-picture">
                        <img src="https://i.pinimg.com/236x/dc/8a/99/dc8a995ae98c126eba023f2917bc9f9b.jpg" alt="Account" />
                    </div>
                    <div class="account-info-name">HuyQuang.</div>
                    <button class="account-info-more">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="feather feather-more-horizontal"
                        >
                            <circle cx="12" cy="12" r="1" />
                            <circle cx="19" cy="12" r="1" />
                            <circle cx="5" cy="12" r="1" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="app-content">
                <div class="app-content-header">
                    <h1 class="app-content-headerText">Welcome</h1>
                    <span style="font-family: Freestyle Script; font-size: 25px; color: rgb(0, 255, 128); margin-left: 15px;"> {{cusInfo.username}}</span>
                    <button class="mode-switch" title="Switch Theme">
                        <svg class="moon" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="24" height="24" viewBox="0 0 24 24">
                            <defs></defs>
                            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                        </svg>
                    </button>
                </div>
                <div class="app-content-actions">
                    <form action="/search-products-cart">
                        <input class="search-bar" name="txtSearch" placeholder="Search..." type="text" required />
                    </form>

                    <div class="app-content-actions-wrapper">
                        <div class="filter-button-wrapper">
                            <button class="action-button filter jsFilter">
                                <span>Filter</span>
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="feather feather-filter"
                                >
                                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
                                </svg>
                            </button>
                            <div class="filter-menu" style="width: 240px;">
                                <label>Price</label>
                                <a  href="/cart/sort/price/asc" style="text-decoration: none;">
                                    <button type="submit" style="width: 60px; border-radius: 4px; margin-right: 7px;">Asc <i class="bi bi-sort-up"></i></button>
                                </a>
                                <a  href="/cart/sort/price/dsc" style="text-decoration: none; margin-right: 7px;">
                                    <button type="submit" style="width: 60px; border-radius: 4px;">Dsc <i class="bi bi-sort-down"></i></button>
                                </a>
                                <a  href="/cart" style="text-decoration: none;">
                                    <button type="submit" style="width: 70px; border-radius: 4px;">None <i class="bi bi-blockquote-right"></i></button>
                                </a>
                                <br><br>
                                <label>Status</label>
                                <select>
                                    <option>All Status</option>
                                    <option>Active</option>
                                    <option>Disabled</option>
                                </select>
                                <div class="filter-menu-buttons">
                                    <button class="filter-button reset">
                                        Reset
                                    </button>
                                    <button class="filter-button apply">
                                        Apply
                                    </button>
                                </div>
                            </div>
                        </div>
                        <button class="action-button list active" title="List View">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list">
                                <line x1="8" y1="6" x2="21" y2="6" />
                                <line x1="8" y1="12" x2="21" y2="12" />
                                <line x1="8" y1="18" x2="21" y2="18" />
                                <line x1="3" y1="6" x2="3.01" y2="6" />
                                <line x1="3" y1="12" x2="3.01" y2="12" />
                                <line x1="3" y1="18" x2="3.01" y2="18" />
                            </svg>
                        </button>
                        <button class="action-button grid" title="Grid View">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-grid">
                                <rect x="3" y="3" width="7" height="7" />
                                <rect x="14" y="3" width="7" height="7" />
                                <rect x="14" y="14" width="7" height="7" />
                                <rect x="3" y="14" width="7" height="7" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="products-area-wrapper tableView cart-products">
                    <div class="products-header">
                        <div class="product-cell image">
                            Items
                        </div>
                        <div class="product-cell category">
                            <div><p style="margin-left: 15px; padding-top: 10px;">Category</p></div>
                        </div>
                        <div class="product-cell status-cell">
                            <div><p style="margin-left: 50px; padding-top: 10px;">Status</p></div>
                        </div>
                        <div class="product-cell quantity">
                            <div><p style="margin-left: 55px; padding-top: 10px;">Quantity</p></div>
                        </div>
                        <div class="product-cell price">
                            <div><p style="margin-left: 85px; padding-top: 10px;">Price</p></div>
                        </div>
                        {{!-- <div class="product-cell subtotal">
                            <div><p style="margin-left: 60px; padding-top: 10px;">Subtotal</p></div>
                        </div> --}}
                        <div class="product-cell stock">
                            <div><p style="margin-left: 105px; padding-top: 10px;">Option</p></div>
                        </div>
                    </div>
                    <br />
                    {{#each model}}
                    <div class="products-row">
                        <button class="cell-more-button">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="18"
                                height="18"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="feather feather-more-vertical"
                            >
                                <circle cx="12" cy="12" r="1" />
                                <circle cx="12" cy="5" r="1" />
                                <circle cx="12" cy="19" r="1" />
                            </svg>
                        </button>
                        <div class="product-cell image">
                            <img src="{{image}}" alt="product" />
                            <span>{{name}}</span>
                        </div>
                        <div class="product-cell category"><span class="cell-label">Category:</span>{{category}}</div>
                        <div class="product-cell status-cell">
                            <span class="cell-label">Status:</span>
                            <span class="status active">Active</span>
                        </div>
                        <div class="product-cell quantity">
                            <span class="cell-label">Quantity:</span>
                            {{!-- <input type="number" value="1" min="1" max="4" name="quantity" style="width: 40px;color: white;background-color: rgb(19, 13, 80); margin-left: -20px;"> --}}
                            <form action="/do-update-quantity/{{_id}}" method="POST">

                                <input class="form-control" type="number" value="{{quantity}}" min="1" max="4" name="quantity" style="width: 40px;color: white;background-color: black; margin: 20px 5px 5px -40px; width: 60px;">
                                <button type="submit" class="btn btn-danger" style="width: 40px; height: 30px; margin: -65px 0 0 30px;"><i class="bi bi-arrow-counterclockwise" style="color: white; margin-top: 2px;  "></i></button>
                            </form>
                            
                        </div>
                        <div class="product-cell price"><span class="cell-label">Price:</span>${{price}}</div>
                        {{!-- <div class="product-cell subtotal"><span class="cell-label">Subtotal:</span>${{subtotal}}</div> --}}
                        <div class="remove-from-cart">
                            <a href="/remove-from-cart/{{_id}}" style="text-decoration: none;"><button class="btn btn-danger" type="submit" style="margin-right: 20px; font-size: 12px;">Remove</button></a>
                        </div>
                    </div>
                    {{/each}}
                </div>
                <h4 style="color: red;">{{message}}</h4>
                <div class="card" style="width: 30%; border: 3px solid white; margin-top: 30px;">
                    <div class="row">
                        <div class="column" style="margin-left: 20px;">
                            <dt style="color: white;">Subtotal:</dt>
                            <dd style="color: white;" class="subtotal" style="margin-left: 170px;">${{subtotal}}</dd>
                        </div>
                        <div class="column">
                            <dt style="color: white;">Tax:</dt>
                            <dd style="color: white;" class="tax" style="margin-left: 220px;">5%</dd>
                        </div>
                        <div class="column">
                            <dt style="color: white;">Total:</dt>
                            <b><dd style="color: red;" class="orderTotal" style="margin-left: 170px;">${{total}}</dd></b>
                        </div>
                        <a href="#" id="myBtn" class="btn btn-out btn-primary btn-square btn-main btn-purchase" data-abc="true" style="color: white; margin: 0 0 10px 30px;"> Make Purchase </a>
                        


                        <!-- The Modal -->
                        <div id="myModal" class="modal">
                            <!-- Modal content -->
                            <div class="modal-content" style="width: 0px; margin-left: 400px; height: 30px;">
                                <main id="main"  style="width: 600px;height: 450px;">
                                    <section id="left">
                                        <div id="head">
                                            <h3>Life has great moments!</h3>
                                            <p>Thank you when believing us!</p>
                                        </div>
                                        <h3>Only <span style="color:red;opacity: 70%;"><i>${{total}}</i></span></h3>
                                    </section>
                                    <section id="right">
                                        <span class="close" style="width: 20px; margin: 10px 0 0 310px;">&times;</span>
                                        <h1>Purchase</h1>
                                        <form action="/purchase" method="POST">
                                            <div id="form-card" class="form-field">
                                                <label for="cc-number">Card number:</label>
                                                <input id="cc-number" name="number"  minlength="12" maxlength="12" placeholder="1111 2222 3333 4444" required />
                                            </div>

                                            <div id="form-date" class="form-field">
                                                <label for="expiry-month">Expiry date:</label>
                                                <div id="date-val">
                                                    <select id="expiry-month" required>
                                                        <option id="trans-label_month" value="" default="default" selected="selected">Month</option>
                                                        <option value="1">01</option>
                                                        <option value="2">02</option>
                                                        <option value="3">03</option>
                                                        <option value="4">04</option>
                                                        <option value="5">05</option>
                                                        <option value="6">06</option>
                                                        <option value="7">07</option>
                                                        <option value="8">08</option>
                                                        <option value="9">09</option>
                                                        <option value="10">10</option>
                                                        <option value="11">11</option>
                                                        <option value="12">12</option>
                                                    </select>
                                                    <select id="expiry-year" required>
                                                        <option id="trans-label_year" value="" default="" selected="selected">Year</option>
                                                        <option value="2018">18</option>
                                                        <option value="2019">19</option>
                                                        <option value="2020">20</option>
                                                        <option value="2021">21</option>
                                                        <option value="2022">22</option>
                                                        <option value="2023">23</option>
                                                        <option value="2024">24</option>
                                                        <option value="2025">25</option>
                                                        <option value="2026">26</option>
                                                        <option value="2027">27</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="form-sec-code" class="form-field">
                                                <label for="sec-code">Security code:</label>
                                                <input name="code" type="password" minlength="3" maxlength="3" placeholder="123" required />
                                            </div>

                                            <button type="submit">Purchase Premium</button>
                                        </form>
                                    </section>
                                </main>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            document.querySelector(".jsFilter").addEventListener("click", function () {
                document.querySelector(".filter-menu").classList.toggle("active");
            });

            document.querySelector(".grid").addEventListener("click", function () {
                document.querySelector(".list").classList.remove("active");
                document.querySelector(".grid").classList.add("active");
                document.querySelector(".products-area-wrapper").classList.add("gridView");
                document.querySelector(".products-area-wrapper").classList.remove("tableView");
            });

            document.querySelector(".list").addEventListener("click", function () {
                document.querySelector(".list").classList.add("active");
                document.querySelector(".grid").classList.remove("active");
                document.querySelector(".products-area-wrapper").classList.remove("gridView");
                document.querySelector(".products-area-wrapper").classList.add("tableView");
            });

            var modeSwitch = document.querySelector(".mode-switch");
            modeSwitch.addEventListener("click", function () {
                document.documentElement.classList.toggle("light");
                modeSwitch.classList.toggle("active");
            });

            // Get the modal
            var modal = document.getElementById("myModal");

            // Get the button that opens the modal
            var btn = document.getElementById("myBtn");

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks the button, open the modal
            btn.onclick = function () {
                modal.style.display = "block";
            };

            // When the user clicks on <span> (x), close the modal
            span.onclick = function () {
                modal.style.display = "none";
            };

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            };

        </script>
    </body>
</html>
